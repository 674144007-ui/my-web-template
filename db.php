<?php
// db.php - р╣Ар╕зр╕нр╕гр╣Мр╕Кр╕▒р╕Щр╕гр╕нр╕Зр╕гр╕▒р╕Ъ InfinityFree р╣Бр╕ер╕░ Localhost р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤

// 1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕Бр╕│р╕ер╕▒р╕Зр╕гр╕▒р╕Щр╕Ър╕Щ Localhost р╕лр╕гр╕╖р╕нр╣Др╕бр╣И
$whitelist = array('127.0.0.1', '::1', 'localhost');
$isLocal = in_array($_SERVER['REMOTE_ADDR'], $whitelist);

if ($isLocal) {
    // ЁЯПа р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╕кр╕│р╕лр╕гр╕▒р╕Ъ Localhost (р╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕Хр╕▒р╕зр╣Ар╕нр╕З / MAMP / XAMPP)
    $host   = 'localhost';
    $user   = 'root';
    $pass   = 'root';       // MAMP='root', XAMPP='' (р╕зр╣Ир╕▓р╕З)
    $dbname = 'classroom_mgmt';
    $port   = 8889;         // MAMP=8889, XAMPP=3306
} else {
    // тШБя╕П р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╕кр╕│р╕лр╕гр╕▒р╕Ъ InfinityFree (р╕Хр╣Йр╕нр╕Зр╣Ар╕нр╕▓р╕Др╣Ир╕▓р╕Ир╕▓р╕Б Control Panel р╕бр╕▓р╣Гр╕кр╣Ир╣Ар╕нр╕З)
    // р╣Др╕Ыр╕Чр╕╡р╣И Control Panel -> MySQL Details р╣Ар╕Юр╕╖р╣Ир╕нр╕Фр╕╣р╕Др╣Ир╕▓р╣Ар╕лр╕ер╣Ир╕▓р╕Щр╕╡р╣Й
    $host   = 'sql206.infinityfree.com';      // р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З: sqlXXX.infinityfree.com
    $user   = 'if0_40963793';                 // MySQL Username
    $pass   = 'O5NG2LRa26znN5X';           // р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ (р╕бр╕▒р╕Бр╕Ир╕░р╣Ар╕Ыр╣Зр╕Щр╕гр╕лр╕▒р╕кр╣Ар╕Фр╕╡р╕вр╕зр╕Бр╕▒р╕Ър╣Ар╕Вр╣Йр╕▓ FTP/VPanel)
    $dbname = 'if0_40963793_classroom_mgmt';       // р╕Кр╕╖р╣Ир╕нр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е (р╕Хр╣Йр╕нр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕Щ Panel р╕Бр╣Ир╕нр╕Щ)
    $port   = 3306;                           // р╕Юр╕нр╕гр╣Мр╕Хр╕бр╕▓р╕Хр╕гр╕Рр╕▓р╕Щ
}

// 2. р╣Ар╕гр╕┤р╣Ир╕бр╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н
mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);

try {
    $conn = new mysqli($host, $user, $pass, $dbname, $port);
    $conn->set_charset("utf8mb4");
} catch (mysqli_sql_exception $e) {
    // р╕Бр╕гр╕Ур╕╡р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╣Др╕бр╣Ир╣Др╕Фр╣Й
    if ($isLocal) {
        die("тЭМ р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е (Local) р╣Др╕бр╣Ир╣Др╕Фр╣Й: " . $e->getMessage());
    } else {
        // р╕Ър╕Щр╣Вр╕ор╕кр╕Хр╣Мр╕Ир╕гр╕┤р╕З р╣Др╕бр╣Ир╕Др╕зр╕гр╣Вр╕Кр╕зр╣М Error р╕вр╕▓р╕зр╣Ж р╣Гр╕лр╣Й User р╣Ар╕лр╣Зр╕Щ
        die("тЭМ р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Др╕Фр╣Й (р╕Бр╕гр╕╕р╕Ур╕▓р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Др╣Ир╕▓ Config р╣Гр╕Щ db.php)");
    }
}
?>